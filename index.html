<html>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PLEASE NO CHANGES BELOW THIS LINE (UNTIL I SAY SO) -->
  <script language="javascript" type="text/javascript" src="libraries/p5.min.js"></script>
  <script language="javascript" type="text/javascript" src="libraries/p5.dom.min.js"></script>
  <script language="javascript" type="text/javascript" src="libraries/p5.ble.js"></script>
  //<script language="javascript" type="text/javascript" src="bluetooth.js"></script>
  //<script language="javascript" type="text/javascript" src="configCommands.js"></script>
  //<script language="javascript" type="text/javascript" src="drawScreen.js"></script>
  //<script language="javascript" type="text/javascript" src="showHideParam.js"></script>
  //<script language="javascript" type="text/javascript" src="wordclockConfigurator.js"></script>
  <!-- OK, YOU CAN MAKE CHANGES BELOW THIS LINE AGAIN -->

  <!-- This line removes any default padding and style.
  You might only need one of these values set. -->
  <style> body { 
padding: 
  0; 
margin: 
  0;
} 
</style>
  </head>

  <body>
    
      <script>
      const serviceUuid = "19b10010-e8f2-537e-4f6c-d104768a1214";
      let myCharacteristic;
      let myValue = 0;
      let myBLE;

      function setup() {
        // Create a p5ble class
        myBLE = new p5ble();

        createCanvas(200, 200);
        textSize(20);
        textAlign(CENTER, CENTER);

        // Create a 'Connect' button
        const connectButton = createButton('Connect')
        connectButton.mousePressed(connectToBle);
      }

      function connectToBle() {
        // Connect to a device by passing the service UUID
        myBLE.connect(serviceUuid, gotCharacteristics);
      }

      // A function that will be called once got characteristics
      function gotCharacteristics(error, characteristics) {
        if (error) console.log('error: ', error);
        console.log('characteristics: ', characteristics);
        myCharacteristic = characteristics[0];
        // Read the value of the first characteristic
        myBLE.read(myCharacteristic, gotValue);
      }

      // A function that will be called once got values
      function gotValue(error, value) {
        if (error) console.log('error: ', error);
        console.log('value: ', value);
        myValue = value;
        // After getting a value, call p5ble.read() again to get the value again
        myBLE.read(myCharacteristic, gotValue);
      }

      function draw() {
        background(250);
        text(myValue, 100, 100);
      }
      </script>
    
  </body>
 </html>
